<Project InitialTarget="Build">

    <Target Name="Build">
        <ItemGroup>
            <!-- I don't know? It sometimes change like what? -->
            <ReleaseFiles Include="../Launcher DL/bin/Release/net7.0-windows/*.*"/>
            <DebugFiles Include="../Launcher DL/bin/Debug/net7.0-windows/*.*"/>
        </ItemGroup>

        <Exec Command="echo NOTE: =====Building App on DEBUG!=====" EchoOff="True" Condition="$(Configuration) == Debug" />
        <Exec Command="echo NOTE: =====Building App on RELEASE!=====" EchoOff="True" Condition="$(Configuration) == Release" />

        <Message Importance="High" Text="[1/5] Deleting DEBUG and RELEASE folders"/>
        <RemoveDir Directories="./DEBUG" Condition="$(Configuration) == Debug"/>
        <RemoveDir Directories="./RELEASE" Condition="$(Configuration) == Release"/>

        <Message Importance="High" Text="[2/5] Deleting Project's OBJ folders"/>
        <RemoveDir Directories="../Launcher%20DL/obj"/>
        <RemoveDir Directories="../DLControls/obj"/>
        <RemoveDir Directories="../Languages/obj"/>
        <Message Importance="High" Text="Deleted Done!"/>

        <Message Importance="High" Text="[3/5] ]Deleting Project's BIN folders"/>
        <RemoveDir Directories="../Launcher%20DL/bin"/>
        <RemoveDir Directories="../DLControls/bin"/>
        <RemoveDir Directories="../Languages/bin"/>

        <Message Importance="High" Text="[4/5] Generating new OBJ"/>
        <Exec Command="cd.. &amp;&amp; dotnet restore" EchoOff="True"/>

        <Message Importance="High" Text="[5/5] Building the Project"/>
        <MSBuild Projects="..\Launcher%20DL\Launcher%20DL.csproj" />
        <Message Importance="High" Text="Build Done!"/>

        <Message Importance="High" Text="Copying files to their respected folders..."/>
        <Message Importance="High" Text="Launcher%20DL/bin/release/net7.0-windows/*.* -> RELEASE " Condition="$(Configuration) == Release"/>
        <Message Importance="High" Text="Launcher%20DL/bin/debug/net7.0-windows/*.* -> DEBUG "  Condition="$(Configuration) == Debug"/>
        
        <MakeDir Directories="./RELEASE" Condition="$(Configuration) == Release"/>
        <MakeDir Directories="./DEBUG" Condition="$(Configuration) == Debug"/>
        <MakeDir Directories="./RELEASE/Images" Condition="$(Configuration) == Release"/>
        <MakeDir Directories="./DEBUG/Images" Condition="$(Configuration) == Debug"/>

        <!-- Sometimes it copies sometimes its not like what the fuck? -->
        <!-- <Message Importance="High" Text="@(ReleaseFiles1)"/>
        <Message Importance="High" Text="@(ReleaseFiles2)"/>
        <Message Importance="High" Text="@(DebugFiles1)"/>
        <Message Importance="High" Text="@(DebugFiles2)"/> -->

        <Copy SourceFiles="@(ReleaseFiles)" DestinationFolder="./RELEASE" Condition="$(Configuration) == Release" ContinueOnError="WarnAndContinue"/>
        <Copy SourceFiles="@(DebugFiles)" DestinationFolder="./DEBUG" Condition="$(Configuration) == Debug" ContinueOnError="WarnAndContinue"/>
        <Copy SourceFiles="../Images/background.jpg" DestinationFolder="./RELEASE/Images" Condition="$(Configuration) == Release" ContinueOnError="WarnAndContinue"/>
        <Copy SourceFiles="../Images/Icon.ico" DestinationFolder="./RELEASE/Images" Condition="$(Configuration) == Release" ContinueOnError="WarnAndContinue"/>
        <Copy SourceFiles="../Images/background.jpg" DestinationFolder="./DEBUG/Images" Condition="$(Configuration) == Release" ContinueOnError="WarnAndContinue"/>
        <Copy SourceFiles="../Images/Icon.ico" DestinationFolder="./DEBUG/Images" Condition="$(Configuration) == Release" ContinueOnError="WarnAndContinue"/>

        <Message Importance="High" Text="Copy Done!"/>

        <Message Importance="High" Text="[1/2] Finalizing..."/>
        <Exec Command="cd RELEASE &amp;&amp; del *.pdb &amp;&amp; del *.deps.json &amp;&amp; attrib +s +h &quot;*.runtimeconfig.json&quot;" EchoOff="true" Condition="$(Configuration) == Release" ContinueOnError="WarnAndContinue"/>
        <Exec Command="cd DEBUG &amp;&amp; del *.pdb &amp;&amp; del *.deps.json &amp;&amp; attrib +s +h &quot;*.runtimeconfig.json&quot;" EchoOff="true" Condition="$(Configuration) == Debug" ContinueOnError="WarnAndContinue"/>
        <Message Importance="High" Text="[2/2] Finalizing...(Clearing/Removing BIN and OBJ folders)"/>
        <RemoveDir Directories="../Launcher%20DL/bin"/>
        <RemoveDir Directories="../DLControls/bin"/>
        <RemoveDir Directories="../Languages/bin"/>
        <RemoveDir Directories="../Launcher%20DL/obj"/>
        <RemoveDir Directories="../DLControls/obj"/>
        <RemoveDir Directories="../Languages/obj"/>
    </Target>

</Project>